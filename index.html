<!DOCTYPE html>
<html lang="en">
<head>
    <title>onegigasecond</title>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">

        <link rel="stylesheet" type="text/css" media="screen" title="User Defined Style" href="./gigasecond.css" /> 
    
        <link href='http://fonts.googleapis.com/css?family=Actor' rel='stylesheet' type='text/css'>

        <!-- note that the /1/ in the url links to the latest version -->
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.15/jquery-ui.min.js"></script>
        <script src="./date.js" type="text/javascript"></script>

        <script type='text/javascript'>
        output_state = 'hidden';
        $(document).ready(function(){
        

            // toggles display of the "e.g. 1st April 1985" default text
            $(".defaultText").focus(function(srcc)
            {
                if ($(this).val() == $(this)[0].title)
                {
                    $(this).removeClass("defaultTextActive");
                    $(this).val("");
                }
            });
            
            $(".defaultText").blur(function()
            {
                if ($(this).val() == "")
                {
                    $(this).addClass("defaultTextActive");
                    $(this).val($(this)[0].title);
                }
            });
            
            $(".defaultText").blur();   

            $('#date_input').keyup(function() {
              //alert('Handler for .keyup() called.');
        
                //alert($('#date_input').val()) 
                var today = Date.today();
                var date_input = $('#date_input').val()
                birth = Date.parse(date_input)
                //alert(birth)
                    
                if( birth != null  )
                {
                    var msec = today - birth;
                    var secs = msec/1000;
                    var days = parseInt(secs/86400);
        
                    // assumption: no three year olds are using this site
                    if( days > 1000 )
                    {
                        var next10e4d = 10000 * Math.ceil(days / 10000)
                        var next10e9s = 1000000000 * Math.ceil(secs / 1000000000)
        
                        var next10e4d_date = new Date( Date.parse(date_input) ).addDays( next10e4d );
                        var next10e9s_date = new Date( Date.parse(date_input) ).addSeconds( next10e9s );

                        var dateFormat = 'ddd d MMM, yyyy'
        
                        $('#output_age_days_val').html(days)
                        $('#output_age_secs_val').html(secs)


                        // convert date to string
                        gCalDays_date = next10e4d_date.toString('yyyyMMdd');

                        // for a full day calendar event we need a date string for the following day as well...
                        gCalDays_date_inc = new Date(next10e4d_date).addDays(1).toString('yyyyMMdd');

                        // create the link to add event to google calendar
                        gCalDays = '<a href="http://www.google.com/calendar/event?action=TEMPLATE&text=' + next10e4d + ' days old&dates=' + gCalDays_date + '/' + gCalDays_date_inc + '&sprop=website:http://www.gigasecond.com&sprop=name:onegigasecond.com&details=' + next10e4d + ' days old! find your next anniversary at http://www.onegigasecond.com"><img class="gcal" src="http://www.google.com/calendar/images/ext/gc_button6.gif" border="0" alt="Add to Google Calendar"></img></a><br/>';

                        // now do the same for gigaseconds
                        gCalSecs_date = next10e9s_date.toString('yyyyMMdd');
                        gCalSecs_date_inc = new Date(next10e9s_date).addDays(1).toString('yyyyMMdd');
                        gCalSecs = '<a href="http://www.google.com/calendar/event?action=TEMPLATE&text=' + next10e9s + ' seconds old&dates=' + gCalSecs_date + '/' + gCalSecs_date_inc + '&sprop=website:http://www.gigasecond.com&sprop=name:onegigasecond.com&details=' + next10e9s + ' seconds old! find your next anniversary at http://www.onegigasecond.com"><img class="gcal" src="http://www.google.com/calendar/images/ext/gc_button6.gif" border="0" alt="Add to Google Calendar"></img></a><br/>';


                        $('#output_days_val').html(next10e4d);
                        $('#output_days_date').html(next10e4d_date.toString(dateFormat) + gCalDays);

                        $('#output_secs_val').html(next10e9s);
                        $('#output_secs_date').html(next10e9s_date.toString(dateFormat) + gCalSecs);

                        if( output_state == 'hidden' )
                        {
                            $('#output_container').show('blind', { direction: 'vertical' }, 200);
                            output_state = 'visible';
                        }
                    }
                }
                else
                {
                    if( output_state == 'visible' )
                    {
                        $('#output_container').hide('blind', { direction: 'vertical' }, 100);
                        output_state = 'hidden';
                    }
                }
            });
        });
        </script>
</head>

<body>
    <div id="wrapper">
       <div id="blank"></div>
         <div id="welcome_text">
            one gigasecond: one billion seconds, 31.7 years
        </div>
        <div id="content">

            <div id="input_container">
                <div id="question">
                    when were you born?
                </div>

                <div id="input">
                    <input class="defaultText" autocomplete="off" spellcheck="false" id="date_input" type="text" title="e.g. 1st April 1985"/>
                </div>
            </div>

            <div id="output_container">
                <div id="output_age">you are <span class="emph" id="output_age_days_val"></span> days old<br/>(approximately <span class="emph" id="output_age_secs_val"></span> seconds)</div>
                <div id="output_days">you will be <span class="emph" id="output_days_val"></span> days old on <span id="output_days_date"></span></div>
                <div id="output_secs">you will be <span class="emph" id="output_secs_val"></span> seconds old on <span id="output_secs_date"></span></div>
            </div>

            <div class="push"></div> 
        </div> 
    </div>

    <div id="footer">
        <!-- Place this tag where you want the +1 button to render -->
        <div class="gplusone">
            <g:plusone size="medium" href="http://www.onegigasecond.com/"></g:plusone>
        </div>
        <div class="fblike">
            <iframe src="http://www.facebook.com/plugins/like.php?app_id=172611732809983&amp;href=http%3A%2F%2Fwww.onegigasecond.com%2F&amp;send=false&amp;layout=button_count&amp;width=450&amp;show_faces=true&amp;action=like&amp;colorscheme=light&amp;font&amp;height=21" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:100px; height:21px;" allowTransparency="true"></iframe>
        </div>

        <!-- Place this tag after the last plusone tag -->
        <script type="text/javascript">
          (function() {
            var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
            po.src = 'https://apis.google.com/js/plusone.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
          })();
        </script>

        <div class="credit">
            <a href="http://www.onegigasecond.com/">onegigasecond.com</a> by <a href="http://www.rjshade.com/">Robbie Shade</a></div>
        </div>
    </div>
</body>

</html>
